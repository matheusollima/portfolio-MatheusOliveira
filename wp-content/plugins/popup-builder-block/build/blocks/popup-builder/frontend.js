(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null},o=function(e,t,o){let n=`${e}=${t}; path=/`;if(o){const e=new Date;e.setTime(e.getTime()+60*o*60*1e3),n+=`; expires=${e.toUTCString()}`}document.cookie=n},n=window.wp.hooks,i=(e,t)=>{let n=e.getAttribute("id");n=n.replace("popup-builder-","");const{entrAnimation:i,exitAnimation:r,animationDuration:p,type:s}=t||{},d=e.querySelector(".popup-builder-container");d.classList.remove(`${i}`),d.classList.add(`${r}`),d.classList.add("reverse"),setTimeout(()=>{["popup","full-screen"].includes(s)&&t?.preventScroll&&(window.parent.document.body.style.overflow=""),e.classList.remove("popup-builder-modal--open"),d.classList.remove(`${r}`),d.classList.remove("reverse"),o(`pbb_closed_${n}`,"true",8760),window.frameElement&&window.frameElement.remove()},1e3*p)},r=window.wp.apiFetch;var p=e.n(r);const s=async(e,n)=>{let r=e.getAttribute("id");r=r.replace("popup-builder-","");const s=e.querySelector(".popup-builder-container"),d=e.querySelector(".popup-builder-close"),u=window.parent.window.getComputedStyle(e),{left:a,right:c,top:l,bottom:b}=u||{},{outsideClose:w,entrAnimation:m,animationDuration:v,type:_}=n||{},f=window.frameElement;let y="display:flex;position:fixed;z-index:9999;border:none;";f&&(f.style=y+"height:100%;width:100%;top:0;left:0;"),e.classList.add("popup-builder-modal--open"),["popup","full-screen"].includes(_)&&n?.preventScroll&&(window.parent.document.body.style.overflow="hidden");const g=e.getBoundingClientRect(),h=e=>"0px"===e?0:void 0;if(!["popup","full-screen"].includes(_)&&f){let e="100%",t=g.height+30+"px";"slide-in"===_&&(e="100vw",t="100vh",y+="pointer-events: none;",function(){function e(e){f.style.pointerEvents=e?"auto":"none"}f.addEventListener("mouseenter",()=>{e(!1)}),window.parent.window.addEventListener("message",t=>{switch(t.data){case"popupkit-enable-pointer":e(!0);break;case"popupkit-disable-pointer":e(!1)}}),window.parent.document.addEventListener("mousemove",t=>{const o=t.target.tagName.toUpperCase();e("BODY"===o||"DIV"===o)})}(),function(){const e=document.querySelector(".popup-builder-modal");e&&(e.addEventListener("mouseenter",function(){window.parent.postMessage("popupkit-enable-pointer","*")}),e.addEventListener("mouseleave",function(){window.parent.postMessage("popupkit-disable-pointer","*")}))}()),f.style=y+`height:${t};width:${e};bottom:${h(b)};left:${h(a)};right:${h(c)};top:${h(l)};`}if(m&&(s.classList.add(`${m}`),s.style.setProperty("--pbb-popup-animate-duration",`${v}s`),setTimeout(()=>{s.classList.remove(`${m}`)},1e3*v)),d&&d.addEventListener("click",()=>i(e,n)),w&&e.addEventListener("click",t=>{const o=e.querySelector(".popup-builder-content");o&&o.contains(t.target)||i(e,n)}),(d||w)&&window.parent.document.addEventListener("keydown",function(t){"Escape"===t.key&&i(e,n)}),location.search.includes("iframe=true")){let e=parseInt(t(`pbb_viewed_${r}_count`));e=isNaN(e)?0:e,o(`pbb_viewed_${r}_count`,e+1,8760),p()({path:"/pbb/v1/popup/logs",method:"POST",data:{postId:Number(r)}}).then(e=>{if("success"===e.status){const{logId:t,userDetails:n,location:i}=e.data;o("pbb_user_info",JSON.stringify(n),8760),sessionStorage.setItem("pbb_logs",t),o("pbb_location",JSON.stringify(i),8760)}})}},d=e=>{const{popupID:r,popupAttributes:p}=(e=>{const t=JSON.parse(e.getAttribute("data-settings"));return{popupID:e.getAttribute("id").replace("popup-builder-",""),popupAttributes:t}})(e),{openTrigger:d,pageLoadDelay:u,scheduleDateTime:a,displayVisitor:c,adblockDetection:l}=p||{},b=()=>{"once-a-day"===c?.frequency?"true"!==t(`pbb_viewed_${r}`)&&(o(`pbb_viewed_${r}`,"true",24),s(e,p)):(0,n.doAction)("popup-builder.checkFrequency",e,r,p,t,o,s)},w=()=>{c?.convertionOff&&"true"===t(`pbb_conversion_${r}`)||("new"===c?.visitor?"true"!==t("pbb_new_visitor")&&"true"!==t("pbb_old_visitor")&&(o("pbb_new_visitor","true",24*c?.newDayCount),o("pbb_old_visitor","true",24*c?.returnDayCount),s(e,p)):"return"===c?.visitor?"true"!==t("pbb_old_visitor")?o("pbb_old_visitor","true",24*c?.returnDayCount):b():(b(),"true"!==t("pbb_old_visitor")&&o("pbb_old_visitor","true",24*c?.returnDayCount)))},m=()=>{"page-load"===d?setTimeout(()=>{w()},1e3*u):"click-count"===d?(()=>{let e=0;const t=()=>{e++,e>=p.clickCount&&(w(),window.parent.document.removeEventListener("click",t))};window.parent.document.addEventListener("click",t)})():(0,n.doAction)("popup-builder.checkOpenTrigger",e,p,s,w)},v=()=>{a?(0,n.doAction)("popup-builder.checkTimeAndShowPopup",e,p,m,i):m()};l&&"function"==typeof window.parent.adblockDetect?window.parent.adblockDetect(function(e){e&&v()}):v()};var u;u="popup-builder",window.addEventListener("load",()=>{window[`__POPUPKIT_${u.toUpperCase()}_INIT`]||(window[`__POPUPKIT_${u.toUpperCase()}_INIT`]=!0,(()=>{const e=document.querySelectorAll(".popup-builder-modal");if(e.length>0)for(const t of e)location.search.includes("iframe=true")&&d(t)})())})})();